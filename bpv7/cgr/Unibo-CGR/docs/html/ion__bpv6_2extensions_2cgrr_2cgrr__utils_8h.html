<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unibo-CGR: ion_bpv6/extensions/cgrr/cgrr_utils.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unibo-CGR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_24065510ea3b8fafd460c563fcd3029b.html">ion_bpv6</a></li><li class="navelem"><a class="el" href="dir_2aea47e73474349ee763a382c61492d7.html">extensions</a></li><li class="navelem"><a class="el" href="dir_ae027303796140585f694ad22ff8acbc.html">cgrr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cgrr_utils.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides all structures, variables, and function definitions necessary for a full implementation of CGR Route Extension Block.  
<a href="#details">More...</a></p>

<p><a href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_g_r_r_hop.html">CGRRHop</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_g_r_route.html">CGRRoute</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afcd9f8477d0251b44bca3a7678832d03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#afcd9f8477d0251b44bca3a7678832d03">CGRR_DEBUG</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:afcd9f8477d0251b44bca3a7678832d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable (1) or disable (0) CGRR debug print.  <a href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#afcd9f8477d0251b44bca3a7678832d03">More...</a><br /></td></tr>
<tr class="separator:afcd9f8477d0251b44bca3a7678832d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6859af012553b89a5016fdc4ac6c5014"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a6859af012553b89a5016fdc4ac6c5014">cgrr_debugPrint</a>(f_, ...)&#160;&#160;&#160;debugPrint((f_), ##__VA_ARGS__)</td></tr>
<tr class="separator:a6859af012553b89a5016fdc4ac6c5014"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a782a844ff91de2d13985010741782c08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a782a844ff91de2d13985010741782c08">printCGRRoute</a> (<a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *<a class="el" href="structcgr_route.html">cgrRoute</a>)</td></tr>
<tr class="separator:a782a844ff91de2d13985010741782c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac37ea808c1c1d49a66697887ef7c1df7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#ac37ea808c1c1d49a66697887ef7c1df7">printCGRRouteBlock</a> (<a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *cgrrBlk)</td></tr>
<tr class="separator:ac37ea808c1c1d49a66697887ef7c1df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871193aca761695afb52e6a596019eb9"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a871193aca761695afb52e6a596019eb9">cgrr_serializeCGRR</a> (uvast *length, <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *cgrrBlk)</td></tr>
<tr class="separator:a871193aca761695afb52e6a596019eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ecea7faa1c8737a5f9f93b2c9368b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#ad3ecea7faa1c8737a5f9f93b2c9368b2">cgrr_deserializeCGRR</a> (AcqExtBlock *blk, AcqWorkArea *wk)</td></tr>
<tr class="separator:ad3ecea7faa1c8737a5f9f93b2c9368b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d7ffa72220f42013e086769941b3ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#ac9d7ffa72220f42013e086769941b3ee">cgrr_getCGRRFromExtensionBlock</a> (ExtensionBlock *blk, <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *cgrrBlk)</td></tr>
<tr class="separator:ac9d7ffa72220f42013e086769941b3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff8adf983ee4071e81cd3306a1b5191"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#aeff8adf983ee4071e81cd3306a1b5191">saveRouteToExtBlock</a> (int hopCount, <a class="el" href="struct_c_g_r_r_hop.html">CGRRHop</a> *hopList, Bundle *bundle)</td></tr>
<tr class="separator:aeff8adf983ee4071e81cd3306a1b5191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77d04c0e37e18d724aa352bf326ac68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#ad77d04c0e37e18d724aa352bf326ac68">addRoute</a> (Bundle *bundle, Object extBlockElt, <a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *routeToAdd)</td></tr>
<tr class="separator:ad77d04c0e37e18d724aa352bf326ac68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515525d3ba1ccb521855f3833847093e"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a515525d3ba1ccb521855f3833847093e">cgrr_addSdnvToStream</a> (unsigned char *stream, Sdnv *value)</td></tr>
<tr class="separator:a515525d3ba1ccb521855f3833847093e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c3e5b2ab2623491b71155cd8c56d0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#aa8c3e5b2ab2623491b71155cd8c56d0f">processModifiedExtensionBlock</a> (Bundle *bundle, Object blkAddr, ExtensionBlock *blk, unsigned int oldLength, unsigned int oldSize)</td></tr>
<tr class="separator:aa8c3e5b2ab2623491b71155cd8c56d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fbcfca125e056329c86078482873b03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a4fbcfca125e056329c86078482873b03">copyCGRRouteBlock</a> (<a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *dest, <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *src)</td></tr>
<tr class="separator:a4fbcfca125e056329c86078482873b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca40be3b8e6899677ffff1abe493131"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a8ca40be3b8e6899677ffff1abe493131">copyCGRRoute</a> (<a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *dest, <a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *src)</td></tr>
<tr class="separator:a8ca40be3b8e6899677ffff1abe493131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212511334be01f2b21c72ee7c76b1593"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a212511334be01f2b21c72ee7c76b1593">releaseCgrrBlkMemory</a> (<a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *cgrrBlk)</td></tr>
<tr class="separator:a212511334be01f2b21c72ee7c76b1593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3087bcdaa9be6be7049b8f97fe5e55"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a6a3087bcdaa9be6be7049b8f97fe5e55">cgrr_getUsedEvc</a> (Bundle *bundle, ExtensionBlock *cgrrExtBlk, uvast *size)</td></tr>
<tr class="memdesc:a6a3087bcdaa9be6be7049b8f97fe5e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function, in success case, returns the previous EVC associated to the last route inserted into CGRR by local node's CGR.  <a href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a6a3087bcdaa9be6be7049b8f97fe5e55">More...</a><br /></td></tr>
<tr class="separator:a6a3087bcdaa9be6be7049b8f97fe5e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401b9fba63ab22d354ff488de55d1806"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a401b9fba63ab22d354ff488de55d1806">cgrr_setUsedEvc</a> (Bundle *bundle, ExtensionBlock *cgrrExtBlk, uvast evc)</td></tr>
<tr class="memdesc:a401b9fba63ab22d354ff488de55d1806"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function, in success case, stores into CGRR the EVC passed as argument.  <a href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8h.html#a401b9fba63ab22d354ff488de55d1806">More...</a><br /></td></tr>
<tr class="separator:a401b9fba63ab22d354ff488de55d1806"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides all structures, variables, and function definitions necessary for a full implementation of CGR Route Extension Block. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020, Alma Mater Studiorum, University of Bologna, All rights reserved.</dd></dl>
<dl class="section user"><dt>License</dt><dd></dd></dl>
<p>This file is part of Unibo-CGR. <br  />
 <br  />
 Unibo-CGR is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. <br  />
 Unibo-CGR is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. <br  />
 <br  />
 You should have received a copy of the GNU General Public License along with Unibo-CGR. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<dl class="section author"><dt>Author</dt><dd>Laura Mazzuca, <a href="#" onclick="location.href='mai'+'lto:'+'lau'+'ra'+'.ma'+'zz'+'uca'+'@s'+'tud'+'io'+'.un'+'ib'+'o.i'+'t'; return false;">laura<span style="display: none;">.nosp@m.</span>.maz<span style="display: none;">.nosp@m.</span>zuca@<span style="display: none;">.nosp@m.</span>stud<span style="display: none;">.nosp@m.</span>io.un<span style="display: none;">.nosp@m.</span>ibo.<span style="display: none;">.nosp@m.</span>it</a></dd></dl>
<dl class="section user"><dt>Supervisor</dt><dd>Carlo Caini, <a href="#" onclick="location.href='mai'+'lto:'+'car'+'lo'+'.ca'+'in'+'i@u'+'ni'+'bo.'+'it'; return false;">carlo<span style="display: none;">.nosp@m.</span>.cai<span style="display: none;">.nosp@m.</span>ni@un<span style="display: none;">.nosp@m.</span>ibo.<span style="display: none;">.nosp@m.</span>it</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afcd9f8477d0251b44bca3a7678832d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd9f8477d0251b44bca3a7678832d03">&#9670;&nbsp;</a></span>CGRR_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CGRR_DEBUG&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable (1) or disable (0) CGRR debug print. </p>

</div>
</div>
<a id="a6859af012553b89a5016fdc4ac6c5014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6859af012553b89a5016fdc4ac6c5014">&#9670;&nbsp;</a></span>cgrr_debugPrint</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cgrr_debugPrint</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;debugPrint((f_), ##__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad77d04c0e37e18d724aa352bf326ac68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad77d04c0e37e18d724aa352bf326ac68">&#9670;&nbsp;</a></span>addRoute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int addRoute </td>
          <td>(</td>
          <td class="paramtype">Bundle *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Object&#160;</td>
          <td class="paramname"><em>extBlockElt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *&#160;</td>
          <td class="paramname"><em>routeToAdd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: addRoute</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts a bundle, an elt address representing the</dt><dd>CGRREB in sdr memory and a route to add to the extension block. This function is called by the <a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8c.html#aeff8adf983ee4071e81cd3306a1b5191">saveRouteToExtBlock()</a> and its purpose is to create a new <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> from the one already contained in the EB and add to it the given route. Then it calls the <a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr_8c.html#aa774077595bfb45746b22d4bb1065e4e">cgrr_attach()</a> fucntion to save the modified information to the sdr Bundle.</dd></dl>
<dl class="section user"><dt>Date Written: 22/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully deserialized into the given structure. </td></tr>
    <tr><td class="paramname">0</td><td>The input pointers did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error. </td></tr>
    <tr><td class="paramname">-2</td><td>The CGRREB was not found inside the Bundle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bundle</td><td>Pointer to the Bundle struct that represents the bundle to which we shall add the given <a class="el" href="struct_c_g_r_route.html">CGRRoute</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">extBlockElt</td><td>Elt Address where we can find the Extension Block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">routeToAdd</td><td><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> we are going to add to the Extension Block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. The block is freed by this function. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">22/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">07/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Added documentation.    </td></tr>
</table>
<dl class="section user"><dt>Function Name: addRoute</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts a bundle, an elt address representing the</dt><dd>CGRREB in sdr memory and a route to add to the extension block. This function is called by the <a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8c.html#aeff8adf983ee4071e81cd3306a1b5191">saveRouteToExtBlock()</a> and its purpose is to create a new <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> from the one already contained in the EB and add to it the given route. Then it calls the <a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr_8c.html#aa774077595bfb45746b22d4bb1065e4e">cgrr_attach()</a> fucntion to save the modified information to the sdr Bundle.</dd></dl>
<dl class="section user"><dt>Date Written: 22/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully deserialized into the given structure. </td></tr>
    <tr><td class="paramname">0</td><td>The input pointers did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error. </td></tr>
    <tr><td class="paramname">-2</td><td>The CGRREB was not found inside the Bundle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bundle</td><td>Pointer to the Bundle struct that represents the bundle to which we shall add the given <a class="el" href="struct_c_g_r_route.html">CGRRoute</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">extBlockElt</td><td>Elt Address where we can find the Extension Block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">routeToAdd</td><td><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> we are going to add to the Extension Block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. The block is freed by this function. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">22/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">07/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Added documentation.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">21/04/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Changed encoding to CBOR for BPV7.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">21/04/40   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Refactoring    </td></tr>
</table>
<p>add at most 4 bytes for the new array length (+= 1) add at most 9 bytes for the route array length add at most 3*9 bytes for each route hop</p>

</div>
</div>
<a id="a515525d3ba1ccb521855f3833847093e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515525d3ba1ccb521855f3833847093e">&#9670;&nbsp;</a></span>cgrr_addSdnvToStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* cgrr_addSdnvToStream </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sdnv *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3ecea7faa1c8737a5f9f93b2c9368b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ecea7faa1c8737a5f9f93b2c9368b2">&#9670;&nbsp;</a></span>cgrr_deserializeCGRR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgrr_deserializeCGRR </td>
          <td>(</td>
          <td class="paramtype">AcqExtBlock *&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AcqWorkArea *&#160;</td>
          <td class="paramname"><em>wk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: cgrr_deserializeCGRR</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts a serialized CGRRouteBlock</dt><dd>from a bundle during acquisition and places it in a <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> structure stored in the Acquisition Extension Block's scratchpad area.</dd></dl>
<dl class="section user"><dt>Date Written: 02/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully deserialized into the scratchpad </td></tr>
    <tr><td class="paramname">0</td><td>The deserialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">blk</td><td>A pointer to the acquisition block holding the serialized abstract security block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wk</td><td>Work area holding bundle information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. This scratchpad must be freed by the caller if the method does not return -1. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">02/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Cut part on saving in Object.    </td></tr>
</table>
<dl class="section user"><dt>Function Name: cgrr_deserializeCGRR</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts a serialized CGRRouteBlock</dt><dd>from a bundle during acquisition and places it in a <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> structure stored in the Acquisition Extension Block's scratchpad area.</dd></dl>
<dl class="section user"><dt>Date Written: 02/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully deserialized into the scratchpad </td></tr>
    <tr><td class="paramname">0</td><td>The deserialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">blk</td><td>A pointer to the acquisition block holding the serialized abstract security block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wk</td><td>Work area holding bundle information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. This scratchpad must be freed by the caller if the method does not return -1. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">02/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Cut part on saving in Object.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">21/04/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Changed decoding to CBOR for BPv7.    </td></tr>
</table>
<p>Deserialize the CGRRB into the new <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *</p>

</div>
</div>
<a id="ac9d7ffa72220f42013e086769941b3ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d7ffa72220f42013e086769941b3ee">&#9670;&nbsp;</a></span>cgrr_getCGRRFromExtensionBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgrr_getCGRRFromExtensionBlock </td>
          <td>(</td>
          <td class="paramtype">ExtensionBlock *&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>cgrrBlk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: cgrr_getCGRRFromExtensionBlock</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts an sdr Extension Block and</dt><dd>an empty but initialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> to fill with the deserialized information. We use this function because, since <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> is a dynamic structure, we cannot retrieve the information about the routes and the hop lists in a single sdr_read; we instead need to retrieve the information from the serialization that is stored in the Extension Block Object value "bytes".</dd></dl>
<dl class="section user"><dt>Date Written: 22/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully deserialized into the given structure. </td></tr>
    <tr><td class="paramname">0</td><td>The deserialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">blk</td><td>A pointer to the ExtensionBlock from which we need to retrieve the <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrrBlk</td><td>Pointer to an initialized but empty <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> to be filled with deserialized information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. The block must be freed by the caller if the method does not return -1. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">22/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">07/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Modified return values.    </td></tr>
</table>
<p>Deserialize the CGRRB into the new <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *</p>

</div>
</div>
<a id="a6a3087bcdaa9be6be7049b8f97fe5e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3087bcdaa9be6be7049b8f97fe5e55">&#9670;&nbsp;</a></span>cgrr_getUsedEvc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgrr_getUsedEvc </td>
          <td>(</td>
          <td class="paramtype">Bundle *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExtensionBlock *&#160;</td>
          <td class="paramname"><em>cgrrExtBlk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uvast *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function, in success case, returns the previous EVC associated to the last route inserted into CGRR by local node's CGR. </p>
<dl class="section user"><dt>Function Name:</dt><dd>cgrr_getUsedEvc</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>09/12/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">2</td><td>We cannot read the data. </td></tr>
    <tr><td class="paramname">1</td><td>The bundle is a new fragment, previous information in <a class="el" href="struct_c_g_r_r_object.html">CGRRObject</a> about used MTV are not more helpful. I suggests to recompute the EVC starting from fragment's payload. Size now contains payload (in bytes). </td></tr>
    <tr><td class="paramname">0</td><td>Ok, the bundle has the same information stored into <a class="el" href="struct_c_g_r_r_object.html">CGRRObject</a>. size now contains the EVC previously stored. </td></tr>
    <tr><td class="paramname">-1</td><td>Some error occurred.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd>This function help you to refill contact's MTV (of the discarded route) when a bundle is reforwarded, i.e. when the forfeit time is expired.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">09/12/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="a871193aca761695afb52e6a596019eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a871193aca761695afb52e6a596019eb9">&#9670;&nbsp;</a></span>cgrr_serializeCGRR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* cgrr_serializeCGRR </td>
          <td>(</td>
          <td class="paramtype">uvast *&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>cgrrBlk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: cgrr_serializeCGRR</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: Serializes an outbound bundle cgrr block and returns the</dt><dd>serialized representation.</dd></dl>
<dl class="section user"><dt>Date Written: 23/10/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned char *</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">unsigned char *</td><td>the serialized outbound bundle CGRR Block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>The length of the serialized block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cgrrBlk</td><td>The <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> to serialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function uses MTAKE to allocate space for the serialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a>. This serialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> (if not NULL) must be freed using MRELEASE.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">23/10/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>
<dl class="section user"><dt>Function Name: cgrr_serializeCGRR</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: Serializes an outbound bundle cgrr block and returns the</dt><dd>serialized representation.</dd></dl>
<dl class="section user"><dt>Date Written: 23/10/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned char *</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">unsigned char *</td><td>the serialized outbound bundle CGRR Block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>The length of the serialized block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cgrrBlk</td><td>The <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> to serialize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function uses MTAKE to allocate space for the serialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a>. This serialized <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> (if not NULL) must be freed using MRELEASE.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">23/10/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">21/04/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Changed encoding to CBOR for BPv7.    </td></tr>
</table>
<p>Serialize the CGRRB into the allocated buffer *</p>

</div>
</div>
<a id="a401b9fba63ab22d354ff488de55d1806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401b9fba63ab22d354ff488de55d1806">&#9670;&nbsp;</a></span>cgrr_setUsedEvc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgrr_setUsedEvc </td>
          <td>(</td>
          <td class="paramtype">Bundle *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExtensionBlock *&#160;</td>
          <td class="paramname"><em>cgrrExtBlk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uvast&#160;</td>
          <td class="paramname"><em>evc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function, in success case, stores into CGRR the EVC passed as argument. </p>
<dl class="section user"><dt>Function Name:</dt><dd>cgrr_setUsedEvc</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>09/12/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success case </td></tr>
    <tr><td class="paramname">-1</td><td>Some error occurred</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd>This function help you to refill contact's MTV (of the discarded route) when a bundle is reforwarded, i.e. when the forfeit time is expired.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">09/12/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="a8ca40be3b8e6899677ffff1abe493131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca40be3b8e6899677ffff1abe493131">&#9670;&nbsp;</a></span>copyCGRRoute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copyCGRRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4fbcfca125e056329c86078482873b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fbcfca125e056329c86078482873b03">&#9670;&nbsp;</a></span>copyCGRRouteBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copyCGRRouteBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a782a844ff91de2d13985010741782c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a782a844ff91de2d13985010741782c08">&#9670;&nbsp;</a></span>printCGRRoute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printCGRRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route.html">CGRRoute</a> *&#160;</td>
          <td class="paramname"><em>cgrRoute</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac37ea808c1c1d49a66697887ef7c1df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac37ea808c1c1d49a66697887ef7c1df7">&#9670;&nbsp;</a></span>printCGRRouteBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printCGRRouteBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>cgrrBlk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa8c3e5b2ab2623491b71155cd8c56d0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c3e5b2ab2623491b71155cd8c56d0f">&#9670;&nbsp;</a></span>processModifiedExtensionBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int processModifiedExtensionBlock </td>
          <td>(</td>
          <td class="paramtype">Bundle *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Object&#160;</td>
          <td class="paramname"><em>blkAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExtensionBlock *&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>oldLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>oldSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a212511334be01f2b21c72ee7c76b1593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212511334be01f2b21c72ee7c76b1593">&#9670;&nbsp;</a></span>releaseCgrrBlkMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void releaseCgrrBlkMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> *&#160;</td>
          <td class="paramname"><em>cgrrBlk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: releaseCgrrBlkMemory</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: Frees all the memory previously allocated in a CGRRBlock</dt><dd></dd></dl>
<dl class="section user"><dt>Date Written: 02/10/19</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*cgrrBlk</td><td>The <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> to free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">02/10/19   </td><td class="markdownTableBodyNone">G.M. De Cola   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="aeff8adf983ee4071e81cd3306a1b5191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeff8adf983ee4071e81cd3306a1b5191">&#9670;&nbsp;</a></span>saveRouteToExtBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int saveRouteToExtBlock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hopCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_g_r_r_hop.html">CGRRHop</a> *&#160;</td>
          <td class="paramname"><em>hopList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bundle *&#160;</td>
          <td class="paramname"><em>bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Function Name: saveRouteToExtBlock</dt><dd></dd></dl>
<dl class="section user"><dt>Purpose: This utility function accepts a hopCount, a vector of Hop of hopCount</dt><dd>length and a Bundle to which we shall attach the given Hop list if it contains a CGRR extension block. What we do here is create the <a class="el" href="struct_c_g_r_route.html">CGRRoute</a> that will be given to the <a class="el" href="ion__bpv6_2extensions_2cgrr_2cgrr__utils_8c.html#ad77d04c0e37e18d724aa352bf326ac68">addRoute()</a> function, which is responsable of actually adding the route.</dd></dl>
<dl class="section user"><dt>Date Written: 22/11/18</dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A <a class="el" href="struct_c_g_r_route_block.html">CGRRouteBlock</a> was successfully saved in the EB. </td></tr>
    <tr><td class="paramname">0</td><td>The input pointers did not pass its sanity check. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a system error. </td></tr>
    <tr><td class="paramname">-2</td><td>The CGRREB was not found inside the Bundle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hopCount</td><td>An integer representing the length of the hopList. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hopList</td><td>Pointer to a list of Hop initialized and populated by the enqueueToNeighbor() function (libcgr.c). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bundle</td><td>Pointer to the Bundle struct that represents the bundle to which we shall add the given HopList.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>This function allocates memory using the MTAKE method. The block is freed by this function. Any system error will release the memory.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MM/DD/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">SPR#   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">22/11/18   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Initial Implementation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">07/04/19   </td><td class="markdownTableBodyNone">L. Mazzuca   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Added documentation.    </td></tr>
</table>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
