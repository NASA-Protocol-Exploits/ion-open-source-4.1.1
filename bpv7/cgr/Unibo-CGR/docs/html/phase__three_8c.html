<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unibo-CGR: core/cgr/phase_three.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unibo-CGR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="dir_6e1c4bcf48b7d5e2618e8d262a3dd3f7.html">cgr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">phase_three.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides the implementation of the CGR's phase three: the choose of the best routes from the candidate routes list (phase two's output).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6262d260bd4061b97eb2733e4d7b3e7b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="phase__three_8c.html#a6262d260bd4061b97eb2733e4d7b3e7b">best_route_cost_function</a> (void *first, void *second)</td></tr>
<tr class="memdesc:a6262d260bd4061b97eb2733e4d7b3e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two routes with some "cost" values, to know who is the best.  <a href="phase__three_8c.html#a6262d260bd4061b97eb2733e4d7b3e7b">More...</a><br /></td></tr>
<tr class="separator:a6262d260bd4061b97eb2733e4d7b3e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0820443759877592e06d99bcc9540c56"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="phase__three_8c.html#a0820443759877592e06d99bcc9540c56">getOneBestRoutePerNeighbor</a> (<a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a> candidateRoutes)</td></tr>
<tr class="memdesc:a0820443759877592e06d99bcc9540c56"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each neighbor choose the best route and removes from candidateRoutes the other routes. At the end candidateRoutes will be sorted (the first route will be the best route and so on)  <a href="phase__three_8c.html#a0820443759877592e06d99bcc9540c56">More...</a><br /></td></tr>
<tr class="separator:a0820443759877592e06d99bcc9540c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ea75785b928c90e0bfffd0fcd04a5a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="phase__three_8c.html#af9ea75785b928c90e0bfffd0fcd04a5a">getBestRoute</a> (<a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a> candidateRoutes)</td></tr>
<tr class="memdesc:af9ea75785b928c90e0bfffd0fcd04a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose the best route and removes all the other routes from candidateRoutes. At the end only the best route will remains in candidateRoutes.  <a href="phase__three_8c.html#af9ea75785b928c90e0bfffd0fcd04a5a">More...</a><br /></td></tr>
<tr class="separator:af9ea75785b928c90e0bfffd0fcd04a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f0276f177013901f4fecdbfd326e367"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="phase__three_8c.html#a7f0276f177013901f4fecdbfd326e367">update_volumes</a> (<a class="el" href="struct_cgr_bundle.html">CgrBundle</a> *bundle, <a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a> bestRoutes)</td></tr>
<tr class="memdesc:a7f0276f177013901f4fecdbfd326e367"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each contact in the hops list of a best route this function will decrease the mtv field for all level of priority less than or equal to the bundle's priority. The volume will be decreased by the bundle's evc.  <a href="phase__three_8c.html#a7f0276f177013901f4fecdbfd326e367">More...</a><br /></td></tr>
<tr class="separator:a7f0276f177013901f4fecdbfd326e367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142fe349b424e48b66f5892091b797d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="phase__three_8c.html#a142fe349b424e48b66f5892091b797d6">chooseBestRoutes</a> (<a class="el" href="struct_cgr_bundle.html">CgrBundle</a> *bundle, <a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a> candidateRoutes)</td></tr>
<tr class="memdesc:a142fe349b424e48b66f5892091b797d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the best routes. At the end in candidateRoutes will remain only the best routes choosed (subset).  <a href="phase__three_8c.html#a142fe349b424e48b66f5892091b797d6">More...</a><br /></td></tr>
<tr class="separator:a142fe349b424e48b66f5892091b797d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides the implementation of the CGR's phase three: the choose of the best routes from the candidate routes list (phase two's output). </p>
<p>The output of this phase is the best routes list.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020, Alma Mater Studiorum, University of Bologna, All rights reserved.</dd></dl>
<dl class="section user"><dt>License</dt><dd></dd></dl>
<p>This file is part of Unibo-CGR. <br  />
 <br  />
 Unibo-CGR is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. <br  />
 Unibo-CGR is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. <br  />
 <br  />
 You should have received a copy of the GNU General Public License along with Unibo-CGR. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<dl class="section author"><dt>Author</dt><dd>Lorenzo Persampieri, <a href="#" onclick="location.href='mai'+'lto:'+'lor'+'en'+'zo.'+'pe'+'rsa'+'mp'+'ier'+'i@'+'stu'+'di'+'o.u'+'ni'+'bo.'+'it'; return false;">loren<span style="display: none;">.nosp@m.</span>zo.p<span style="display: none;">.nosp@m.</span>ersam<span style="display: none;">.nosp@m.</span>pier<span style="display: none;">.nosp@m.</span>i@stu<span style="display: none;">.nosp@m.</span>dio.<span style="display: none;">.nosp@m.</span>unibo<span style="display: none;">.nosp@m.</span>.it</a></dd></dl>
<dl class="section user"><dt>Supervisor</dt><dd>Carlo Caini, <a href="#" onclick="location.href='mai'+'lto:'+'car'+'lo'+'.ca'+'in'+'i@u'+'ni'+'bo.'+'it'; return false;">carlo<span style="display: none;">.nosp@m.</span>.cai<span style="display: none;">.nosp@m.</span>ni@un<span style="display: none;">.nosp@m.</span>ibo.<span style="display: none;">.nosp@m.</span>it</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6262d260bd4061b97eb2733e4d7b3e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6262d260bd4061b97eb2733e4d7b3e7b">&#9670;&nbsp;</a></span>best_route_cost_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int best_route_cost_function </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two routes with some "cost" values, to know who is the best. </p>
<dl class="section user"><dt>Function Name:</dt><dd>best_route_cost_function</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>13/02/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>The first Route is better than the second Route </td></tr>
    <tr><td class="paramname">0</td><td>The first Route has the same cost of the second Route </td></tr>
    <tr><td class="paramname">1</td><td>The second Route is better than the first Route</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*first</td><td>The first Route </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*second</td><td>The second Route</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>first doesn't have to be NULL. </dd>
<dd>
second doesn't have to be NULL.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13/02/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="a142fe349b424e48b66f5892091b797d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a142fe349b424e48b66f5892091b797d6">&#9670;&nbsp;</a></span>chooseBestRoutes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chooseBestRoutes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cgr_bundle.html">CgrBundle</a> *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a>&#160;</td>
          <td class="paramname"><em>candidateRoutes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the best routes. At the end in candidateRoutes will remain only the best routes choosed (subset). </p>
<dl class="section user"><dt>Function Name:</dt><dd>chooseBestRoutes</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>13/02/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;= 0</td><td>The number of the best routes choosed. </td></tr>
    <tr><td class="paramname">-1</td><td>Arguments error: NULL pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*bundle</td><td>The bundle that has to be forwarded </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">candidateRoutes</td><td>Initially it contains the candidate routes, at the end it will contains only the best routes. The other routes will be discarded for the forwarding of the bundle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Notes:</dt><dd><ol type="1">
<li>If the bundle is not critical at the end we get at most one route.</li>
<li>If the bundle is critical at the end we get at most one route per neighbor.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13/02/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="af9ea75785b928c90e0bfffd0fcd04a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ea75785b928c90e0bfffd0fcd04a5a">&#9670;&nbsp;</a></span>getBestRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getBestRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a>&#160;</td>
          <td class="paramname"><em>candidateRoutes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Choose the best route and removes all the other routes from candidateRoutes. At the end only the best route will remains in candidateRoutes. </p>
<dl class="section user"><dt>Function Name:</dt><dd>getBestRoute</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>13/02/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">*candidateRoutes</td><td>Initially it contains all the candidateRoutes, at the end only the best route will remains in this list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>candidateRoutes doesn't have to be NULL.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13/02/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="a0820443759877592e06d99bcc9540c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0820443759877592e06d99bcc9540c56">&#9670;&nbsp;</a></span>getOneBestRoutePerNeighbor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getOneBestRoutePerNeighbor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a>&#160;</td>
          <td class="paramname"><em>candidateRoutes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each neighbor choose the best route and removes from candidateRoutes the other routes. At the end candidateRoutes will be sorted (the first route will be the best route and so on) </p>
<dl class="section user"><dt>Function Name:</dt><dd>getOneBestRoutePerNeighbor</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>13/02/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">*candidateRoutes</td><td>Initially it contains all the candidateRoutes, at the end only the best route per neighbor remains in this list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>candidateRoutes doesn't have to be NULL.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13/02/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
<a id="a7f0276f177013901f4fecdbfd326e367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f0276f177013901f4fecdbfd326e367">&#9670;&nbsp;</a></span>update_volumes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_volumes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cgr_bundle.html">CgrBundle</a> *&#160;</td>
          <td class="paramname"><em>bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="list__type_8h.html#a2f83d70457d96c5f0328f29529375850">List</a>&#160;</td>
          <td class="paramname"><em>bestRoutes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each contact in the hops list of a best route this function will decrease the mtv field for all level of priority less than or equal to the bundle's priority. The volume will be decreased by the bundle's evc. </p>
<dl class="section user"><dt>Function Name:</dt><dd>update_volumes</dd></dl>
<dl class="section user"><dt>Date Written:</dt><dd>13/02/20</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*bundle</td><td>The bundle from we get the priority level and the EVC </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bestRoutes</td><td>The list of best routes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>bundle doesn't have to be NULL. </dd>
<dd>
bestRoutes doesn't have to be NULL.</dd></dl>
<dl class="section user"><dt>Revision History:</dt><dd></dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">DD/MM/YY   </th><th class="markdownTableHeadNone">AUTHOR   </th><th class="markdownTableHeadNone">DESCRIPTION    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13/02/20   </td><td class="markdownTableBodyNone">L. Persampieri   </td><td class="markdownTableBodyNone">Initial Implementation and documentation.    </td></tr>
</table>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
